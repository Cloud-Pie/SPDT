version: '3'
services:
    spdt:
        build: .
        container_name: 'spdt'
        ports:
            - 8083:8083
    serie-processing:
          build: Time-Serie-Processing
          container_name: 'serie'
          ports:
             - 5003:5003
    db-profiles:
         image: mongo:3.6.5
         container_name: 'profilesdb'
         restart: always
         environment:
             - MONGO_DATA_DIR=/data/db
             - MONGO_LOG_DIR=/dev/null
         ports:
              - 27016:27016
         volumes:
              - db-data-pro:/root/mongodb/data
    db-policies:
         image: mongo:3.6.5
         container_name: 'policiesdb'
         restart: always
         environment:
            - MONGO_DATA_DIR=/data/db
            - MONGO_LOG_DIR=/dev/null
         ports:
            - 27018:27018
         volumes:
            - db-data-pol:/root/mongodb/data

    db-forecast:
        image: mongo:3.6.5
        container_name: 'forecastdb'
        restart: always
        environment:
          - MONGO_DATA_DIR=/data/db
          - MONGO_LOG_DIR=/dev/null
        ports:
          - 27019:27019
        volumes:
          - db-data-for:/root/mongodb/data
volumes:
    db-data-pro:
    db-data-pol:
    db-data-for:
